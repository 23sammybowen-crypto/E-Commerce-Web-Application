{% extends 'store/base.html' %}
{% load static %}

{% block content %}

<div class="cart-container">
    <h1 class="cart-title">Your Cart</h1>

    {% if items %}
        {% for item in items %}
        <div class="cart-item">
            {% if item.product.image %}
                <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}"
                     style="width: 100px; height: 100px; object-fit: cover; border-radius: 10px;">
            {% else %}
                <img src="{% static 'store/default.png' %}" alt="No image"
                     style="width: 100px; height: 100px; object-fit: cover; border-radius: 10px;">
            {% endif %}

            <div class="cart-item-info">
                <h3>{{ item.product.name }}</h3>
                <p>Price: ${{ item.product.price|floatformat:2 }} each</p>

                <div style="display: flex; align-items: center; gap: 12px; margin: 15px 0;">
                    <a href="{% url 'decrease-from-cart' item.product.id %}"
                       class="button" style="padding: 8px 15px; font-size: 20px;">â€“</a>
                    <span style="font-size: 22px; font-weight: bold; min-width: 50px; text-align: center;">
                        {{ item.quantity }}
                    </span>
                    <a href="{% url 'add-to-cart' item.product.id %}"
                       class="button" style="padding: 8px 15px; font-size: 20px;">+</a>
                </div>

                <p><strong>Subtotal: ${{ item.total|floatformat:2 }}</strong></p>
            </div>

            <div>
                <a href="{% url 'remove-from-cart' item.product.id %}"
                   class="button">
                   Remove
                </a>
            </div>
        </div>
        {% endfor %}

        <div class="total-box">
            <h2>Total: ${{ total|floatformat:2 }}</h2>
        </div>

    {% else %}
        <h2>
            Your cart is empty.<br><br>
        </h2>
    {% endif %}
</div>

{% endblock %}